# Halo Blog Tools Plugin - è¿œç¨‹è°ƒè¯•æŒ‡å—

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. è·å–è¿œç¨‹è°ƒè¯•å¯†é’¥

1. è®¿é—® [Dify æ’ä»¶å¼€å‘è€…é¢æ¿](https://dify.ai/plugins/developer)
2. ç™»å½•æ‚¨çš„Difyè´¦æˆ·
3. æ‰¾åˆ°"è¿œç¨‹è°ƒè¯•"æˆ–"Remote Debugging"éƒ¨åˆ†
4. å¤åˆ¶è°ƒè¯•å¯†é’¥ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼‰

### 2. é…ç½®ç¯å¢ƒå˜é‡

1. å¤åˆ¶ `.env.template` ä¸º `.env`ï¼š
   ```bash
   cp .env.template .env
   ```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥æ­£ç¡®çš„å€¼ï¼š
   ```env
   INSTALL_METHOD=remote
   REMOTE_INSTALL_URL=https://remote-plugin-dev.dify.ai/install
   REMOTE_INSTALL_KEY=ä½ çš„å®é™…è°ƒè¯•å¯†é’¥
   ```

## ğŸš€ å¯åŠ¨è¿œç¨‹è°ƒè¯•

### ä½¿ç”¨å®˜æ–¹CLIå·¥å…·ï¼ˆæ¨èï¼‰

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd halo-blog-tools

# å¯åŠ¨è¿œç¨‹è°ƒè¯•
python -m main
```

### æ‰‹åŠ¨å¯åŠ¨

```bash
# æ¿€æ´»Pythonç¯å¢ƒï¼ˆå¦‚æœä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼‰
# source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate     # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æ’ä»¶
python main.py
```

## ğŸ“Š éªŒè¯è¿æ¥

å¯åŠ¨ååº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹æ—¥å¿—ï¼š

```
2025-07-01 10:15:00,123 - __main__ - INFO - Plugin starting with install method: remote
2025-07-01 10:15:00,124 - __main__ - INFO - Remote URL configured: https://remote-plugin-dev.dify.ai/install
2025-07-01 10:15:00,125 - __main__ - INFO - Remote key configured: ********1234
2025-07-01 10:15:00,200 - __main__ - INFO - Halo Blog Tools plugin initialized successfully
```

## ğŸ”§ åœ¨Difyä¸­æµ‹è¯•

### 1. æ·»åŠ æ’ä»¶åˆ°Dify

1. åœ¨Difyä¸­åˆ›å»ºæ–°çš„åº”ç”¨æˆ–å·¥ä½œæµ
2. è¿›å…¥"å·¥å…·"æˆ–"Tools"éƒ¨åˆ†
3. é€‰æ‹©"æ·»åŠ è‡ªå®šä¹‰å·¥å…·"
4. æ‰¾åˆ°"Halo Blog Tools"æ’ä»¶
5. é…ç½®è¿æ¥å‚æ•°ï¼š
   - **Halo CMS Base URL**: æ‚¨çš„Haloç«™ç‚¹URL
   - **Personal Access Token**: Haloä¸ªäººè®¿é—®ä»¤ç‰Œ

### 2. æµ‹è¯•è¿æ¥

é¦–å…ˆä½¿ç”¨"Halo Setup"å·¥å…·æµ‹è¯•è¿æ¥ï¼š

```
å·¥å…·: Halo Setup
å‚æ•°: ï¼ˆæ— éœ€å‚æ•°ï¼‰
```

æˆåŠŸè¿æ¥ååº”è¯¥æ˜¾ç¤ºï¼š
- âœ… è¿æ¥çŠ¶æ€
- ğŸ“Š ç«™ç‚¹ç»Ÿè®¡ä¿¡æ¯
- ğŸ”§ å¯ç”¨åŠŸèƒ½åˆ—è¡¨

### 3. æµ‹è¯•åŠŸèƒ½

**åˆ›å»ºæ–‡ç« ï¼š**
```
å·¥å…·: Halo Post Create
å‚æ•°:
- title: "æµ‹è¯•æ–‡ç« æ ‡é¢˜"
- content: "è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« çš„å†…å®¹"
- publish_immediately: true
```

**è·å–æ–‡ç« åˆ—è¡¨ï¼š**
```
å·¥å…·: Halo Post List
å‚æ•°:
- page: 0
- size: 10
```

**åˆ›å»ºåŠ¨æ€ï¼š**
```
å·¥å…·: Halo Moment Create
å‚æ•°:
- content: "è¿™æ˜¯ä¸€æ¡æµ‹è¯•åŠ¨æ€"
- media_urls: []
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - éªŒè¯è°ƒè¯•å¯†é’¥æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤DifyæœåŠ¡çŠ¶æ€

2. **è®¤è¯é”™è¯¯**
   - æ£€æŸ¥Halo CMS URLæ˜¯å¦æ­£ç¡®
   - éªŒè¯Personal Access Tokenæƒé™
   - ç¡®è®¤tokenæœªè¿‡æœŸ

3. **æƒé™ä¸è¶³**
   - ç¡®ä¿tokenå…·æœ‰ä»¥ä¸‹æƒé™ï¼š
     - `post:manage`
     - `moment:manage`
     - `category:view`
     - `tag:view`

### è°ƒè¯•æŠ€å·§

1. **å¢åŠ æ—¥å¿—çº§åˆ«**ï¼š
   ```env
   LOG_LEVEL=DEBUG
   ```

2. **æ£€æŸ¥ç½‘ç»œè¿æ¥**ï¼š
   ```bash
   curl -H "Authorization: Bearer YOUR_TOKEN" \
        https://your-halo-site.com/apis/content.halo.run/v1alpha1/posts?page=0&size=1
   ```

3. **éªŒè¯æ’ä»¶åŒ…**ï¼š
   ```bash
   # æ£€æŸ¥åŒ…æ–‡ä»¶å¤§å°å’Œå†…å®¹
   ls -la halo-blog-tools.difypkg
   ```

## ğŸ“š ç›¸å…³èµ„æº

- [Difyæ’ä»¶å¼€å‘æ–‡æ¡£](https://docs.dify.ai/plugin-dev-zh/)
- [Halo CMS APIæ–‡æ¡£](https://docs.halo.run/developer-guide/api)
- [é¡¹ç›®GitHubä»“åº“](https://github.com/your-username/halo-blog-tools)

## ğŸ’¡ æç¤º

- è¿œç¨‹è°ƒè¯•ä¼šæ¶ˆè€—Difyçš„é…é¢ï¼Œå»ºè®®åœ¨æœ¬åœ°å¼€å‘å®Œæˆåå†è¿›è¡Œè¿œç¨‹æµ‹è¯•
- è°ƒè¯•å¯†é’¥æœ‰æ—¶æ•ˆæ€§ï¼Œè¿‡æœŸåéœ€è¦é‡æ–°è·å–
- å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒä¸­è¿›è¡Œè°ƒè¯•ï¼Œé¿å…å½±å“ç”Ÿäº§æ•°æ® 